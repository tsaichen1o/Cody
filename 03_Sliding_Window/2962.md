é€™é¡Œè€ƒçš„æ˜¯ **æ»‘å‹•çª—å£ (Sliding Window) + æ•¸å€¼è¿½è¹¤ (max element + æ¬¡æ•¸çµ±è¨ˆ)** çš„çµ„åˆæŠ€å·§ã€‚

---

### ğŸ“˜ é¡Œç›®: Count Subarrays Where the Maximum Element Appears at Least k Times  
### ğŸ“‚ é¡å‹: Sliding Window, Frequency Count  
### ğŸ§  é›£åº¦: Medium  
---

## ğŸ§  è§£æ³•èªªæ˜

### ğŸ” ç›®æ¨™
æˆ‘å€‘è¦æ‰¾å‡ºæ¯å€‹å­é™£åˆ—ä¸­ï¼š
- **æœ€å¤§å€¼æ˜¯æŸå€‹å…ƒç´  `maxVal`**
- ä¸”é€™å€‹ `maxVal` åœ¨è©²å­é™£åˆ—ä¸­è‡³å°‘å‡ºç¾ `k` æ¬¡

---

## âœ… æ ¸å¿ƒæ€è·¯

1. **å…ˆæ‰¾å‡ºæ•´å€‹é™£åˆ—ä¸­çš„æœ€å¤§å€¼ `maxVal`**ã€‚  
   å› ç‚ºåªæœ‰å®ƒæœƒæ˜¯å€™é¸ã€Œæœ€å¤§å€¼ã€ã€‚

2. ç„¶å¾Œç”¨ sliding window ä¾†æ‰¾å‡ºã€ŒåŒ…å«è‡³å°‘ `k` å€‹ `maxVal`ã€çš„å­é™£åˆ—æ•¸é‡ã€‚

3. å°æ–¼æ¯å€‹å³é‚Šç•Œ `r`ï¼Œåªè¦ç•¶å‰å­é™£åˆ—ä¸­æœ‰è¶…é `k` å€‹ `maxVal`ï¼Œå°±å¯ä»¥å¾å·¦é‚Šç•Œ `l` é–‹å§‹è¨ˆç®—è²¢ç»ã€‚

4. å­é™£åˆ—è²¢ç»æ•¸é‡ç‚º `l + 1`ï¼ˆå› ç‚º `l` å¯ä»¥å¾ 0 åˆ°ç¾åœ¨çš„ä½ç½®ï¼‰

---

## âœ… C++ è§£æ³•ï¼š

```cpp
class Solution {
public:
    long long countSubarrays(vector<int>& nums, int k) {
        int n = nums.size();
        int maxVal = *max_element(nums.begin(), nums.end());

        long long ans = 0;
        int l = 0, count = 0;

        for (int r = 0; r < n; ++r) {
            if (nums[r] == maxVal) {
                count++;
            }

            while (count >= k) {
                if (nums[l] == maxVal) {
                    count--;
                }
                l++;
            }

            ans += l; // æ‰€æœ‰ä»¥ r çµå°¾ã€èµ·é»ç‚º [0, l-1] çš„å­é™£åˆ—
        }

        return ans;
    }
};
```

---

### âœ… ç‚ºä»€éº¼é€™æ¨£å¯«ï¼Ÿ

- æˆ‘å€‘**å›ºå®šå³ç«¯é» r**ï¼Œç¶­æŒä¸€å€‹åˆæ³•çš„å€é–“ `count(maxVal) < k`ã€‚
- æ¯æ¬¡ç§»å‹•å³ç«¯é»å¾Œï¼Œåªè¦å·¦ç«¯é»é‚„åœ¨åˆæ³•å€é–“ï¼Œå°±æŠŠä»¥ `r` çµå°¾ã€`l` ç‚ºèµ·é»çš„å­é™£åˆ—å…¨éƒ¨åŠ èµ·ä¾†ã€‚

---

## â±ï¸ æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦åˆ†æ

| é …ç›® | è¤‡é›œåº¦ | èªªæ˜ |
|:---|:---|:---|
| æ™‚é–“è¤‡é›œåº¦ | **O(n)** | æ¯å€‹æŒ‡æ¨™ `l`ã€`r` å„è‡ªæœ€å¤šç§»å‹• `n` æ¬¡ |
| ç©ºé–“è¤‡é›œåº¦ | **O(1)** | åªä½¿ç”¨å¸¸æ•¸è®Šæ•¸ (`l`, `r`, `count`, `ans`) |

---

## ğŸ§© README æ ¼å¼ï¼š

| # | é¡Œç›® | åˆ†é¡ | é›£åº¦ | è§£æ³•ç­†è¨˜ | æ™‚é–“è¤‡é›œåº¦ | ç©ºé–“è¤‡é›œåº¦ | ç¨‹å¼ç¢¼ |
|---|------|------|------|-----------|--------------|--------------|--------|
| - | [Count Subarrays Where Max Appears at Least K Times](https://leetcode.com/problems/count-subarrays-where-the-maximum-element-appears-at-least-k-times/) | Sliding Window | Medium | å›ºå®šå³ç«¯ï¼Œç¶­è­·å·¦ç«¯ï¼Œä½¿å€é–“å…§ max å€¼å‡ºç¾æ¬¡æ•¸ < kï¼Œè²¢ç»å­é™£åˆ—å€‹æ•¸ç‚º l | O(n) | O(1) | [code](./sliding_window/xxxx_max_k_times_subarray.cpp) |

---

## ğŸ“„ `.cpp` ç­†è¨˜æ ¼å¼

```cpp
// é¡Œç›®: Count Subarrays Where Max Appears at Least K Times
// é¡å‹: Sliding Window
// é›£åº¦: Medium
// è§£æ³•:
// - å…ˆæ‰¾æ•´å€‹é™£åˆ—ä¸­çš„æœ€å¤§å€¼ maxVal
// - ç„¶å¾Œæ»‘å‹•çª—å£ [l, r] ç¶­æŒç•¶å‰å€é–“ä¸­ maxVal çš„å‡ºç¾æ¬¡æ•¸ count
// - æ¯ç•¶ count >= kï¼Œç§»å‹•å·¦é‚Šç•Œï¼Œè®“å€é–“è®Šç‚ºä¸åˆæ³•
// - æ¯å€‹å³ç«¯ rï¼Œéƒ½èƒ½è²¢ç» l å€‹ä»¥ r çµå°¾çš„åˆæ³•å­é™£åˆ—ï¼ˆå› ç‚ºå·¦ç«¯å¾ 0 åˆ° l-1 éƒ½æ˜¯æœ‰æ•ˆèµ·é»ï¼‰

class Solution {
public:
    long long countSubarrays(vector<int>& nums, int k) {
        int n = nums.size();
        int maxVal = *max_element(nums.begin(), nums.end());

        long long ans = 0;
        int l = 0, count = 0;

        for (int r = 0; r < n; ++r) {
            if (nums[r] == maxVal) {
                count++;
            }

            while (count >= k) {
                if (nums[l] == maxVal) {
                    count--;
                }
                l++;
            }

            ans += l;
        }

        return ans;
    }
};
```

---

æƒ³æŠŠé€™é¡ŒåŠ é€² README å—ï¼Ÿæˆ–è€…ä½ è¦è‡ªå·±å¯¦ä½œä¸€éæˆ‘å¹«ä½ æª¢æŸ¥ï¼Ÿ  
æˆ–è¦æˆ‘æ¨è–¦ä½ å¦ä¸€é¡Œ Sliding Window + Map æ›´è¤‡é›œçš„é€²éšæŒ‘æˆ°ï¼ŸğŸ”¥